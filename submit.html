<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Submit a Fail â€“ Fails.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --card: #0b1120;
      --accent: #f97316;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --radius: 1.2rem;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter", sans-serif;
      background:
        linear-gradient(to bottom, rgba(0,0,0,0.55), rgba(0,0,0,0.7)),
        url("india-flag.png");
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }
    .shell {
      width: 100%;
      max-width: 520px;
    }
    .card {
      background: rgba(11,17,32,0.96);
      border-radius: var(--radius);
      padding: 24px 20px 20px;
      border: 1px solid rgba(148,163,184,0.4);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 36px rgba(0,0,0,0.6);
    }
    .top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }
    .back-link-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.6);
      font-size: 0.78rem;
      color: var(--muted);
      text-decoration: none;
      background: rgba(15,23,42,0.9);
    }
    h1 {
      font-size: 1.4rem;
      margin-bottom: 4px;
    }
    .sub {
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 16px;
    }
    label {
      font-size: 0.8rem;
      display: block;
      margin-bottom: 4px;
      color: var(--muted);
    }
    input[type="text"],
    input[type="file"] {
      width: 100%;
      border-radius: 0.8rem;
      border: 1px solid rgba(148,163,184,0.6);
      background: rgba(15,23,42,0.9);
      color: var(--text);
      padding: 10px 12px;
      font-size: 0.9rem;
      margin-bottom: 10px;
      outline: none;
    }
    input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(249,115,22,0.4);
    }
    .help {
      font-size: 0.75rem;
      color: var(--muted);
      margin-bottom: 10px;
    }
    button {
      width: 100%;
      border-radius: 999px;
      border: none;
      padding: 11px 16px;
      font-size: 0.95rem;
      font-weight: 600;
      background: linear-gradient(135deg, #f97316, #ec4899);
      color: #020617;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 6px;
    }
    button:disabled {
      opacity: 0.5;
      cursor: default;
    }
    .status {
      margin-top: 10px;
      font-size: 0.78rem;
    }
    .status.ok { color: #4ade80; }
    .status.err { color: #f97373; }
  </style>
</head>
<body>
<div class="shell">
  <div class="card">
    <div class="top-row">
      <a href="index.html" class="back-link-btn">â¬… Return to home</a>
      <span style="font-size:0.75rem;color:var(--muted);">Fails.com upload</span>
    </div>

    <h1>Submit your fail</h1>
    <p class="sub">
      Upload a video (MP4) or image meme (PNG/JPG). If itâ€™s good, it goes into the global fail pool.
    </p>

    <form id="submitForm">
      <label for="title">Title / short description</label>
      <input id="title" name="title" type="text" maxlength="120"
             placeholder="Guy discovers gravity the hard way" />

      <label for="author">Name or @handle (optional)</label>
      <input id="author" name="author" type="text" maxlength="80"
             placeholder="@yourtwitter or your name" />

      <label for="file">Your fail (video or image)</label>
      <input id="file" name="file" type="file"
             accept="video/mp4,video/*,image/png,image/jpeg,image/webp" required />

      <p class="help">
        Max size ~200MB. By uploading, you confirm you have the right to share this content.
      </p>

      <button type="submit" id="submitBtn">
        ðŸš€ Submit fail
      </button>

      <div id="status" class="status"></div>
    </form>
  </div>
</div>

<script>
  const API_BASE ="https://inidan-finder-production-c13b.up.railway.app";

  const form = document.getElementById("submitForm");
  const statusEl = document.getElementById("status");
  const btn = document.getElementById("submitBtn");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    statusEl.textContent = "";
    statusEl.className = "status";

    const fileInput = document.getElementById("file");
    const titleInput = document.getElementById("title");
    const authorInput = document.getElementById("author");

    if (!fileInput.files.length) {
      statusEl.textContent = "Please choose a file.";
      statusEl.classList.add("err");
      return;
    }

    const file = fileInput.files[0];
    const formData = new FormData();
    formData.append("file", file);
    formData.append("title", titleInput.value.trim());
    formData.append("author", authorInput.value.trim());

    btn.disabled = true;

    try {
      const res = await fetch(`${API_BASE}/api/upload`, {
        method: "POST",
        body: formData
      });

      if (!res.ok) {
        throw new Error("Upload failed");
      }

      const data = await res.json();
      console.log("Uploaded:", data);

      statusEl.textContent = "Fail uploaded! Itâ€™s now in the rotation ðŸŽ‰";
      statusEl.classList.add("ok");
      form.reset();
    } catch (err) {
      console.error(err);
      statusEl.textContent = "Something went wrong. Try again.";
      statusEl.classList.add("err");
    } finally {
      btn.disabled = false;
    }
  });
</script>
</body>
</html>




